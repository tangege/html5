<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <style>

        #gg{
            width: 500px;
            height: 400px;
        }

    </style>
</head>
<body>


<video id="myvideo" width="500" controls>
    <source src="video/mov_bbb.mp4"/>
    <source src="video/movie.ogg"/>
    您的浏览器不支持video标签！
</video>
<span id="currenttime">0:00</span>
<span id="totaltime"></span>
<button id="playbtn">播放</button>
<button id="pausebtn">暂停</button>
<button id="stopbtn">停止</button>
<button id="btn">测试</button>

<script src="js/preimgs.js"></script>
<script>


    var myvideo = document.getElementById("myvideo");

    document.getElementById("playbtn").onclick = function () {
        myvideo.play();
    }
    document.getElementById("pausebtn").onclick = function () {
        myvideo.pause();
    }

    document.getElementById("stopbtn").onclick = function () {
        stopVideo(myvideo);
    }

    getCurrentTime(myvideo, function (currentime) {
        document.getElementById("currenttime").innerHTML = "0:" + currentime;
    })

    getDuration(myvideo, function (duration) {
        document.getElementById("totaltime").innerHTML = "/0:" + duration;
    })

    //myvideo.ondurationchange = function () {

    //}
    document.getElementById("btn").onclick = function () {

    }

    //停止视频
    function stopVideo (videoobj){
        videoobj.pause();
        videoobj.currentTime = 0;
    }

    //返回视频播放当前长度
    function getDuration (videoobj, fn) {
        if(videoobj.duration){
            if(fn){
                fn.call(this, Math.round(videoobj.duration));
            }
        }else {
            videoobj.addEventListener("durationchange", function () {
                videoobj.removeEventListener("durationchange", arguments.callee, false);
                if(fn){
                    fn.call(videoobj, Math.round(videoobj.duration) < 10? "0" + Math.round(videoobj.duration):Math.round(videoobj.duration));
                }
            }, false)
        }
    }

    //返回播放当前时间
    function getCurrentTime (videoobj, fn) {
        videoobj.addEventListener("timeupdate", function () {
            if(fn){
                fn.call(videoobj, Math.floor(videoobj.currentTime) < 10? "0" + Math.floor(videoobj.currentTime): Math.floor(videoobj.currentTime));
            }
        }, false);
    }

    //返回媒体的url属性
    function getVideoURL (videoobj) {
        return videoobj.currentSrc;
    }

    //检测视频类型是否能被播放
    function checkVideoType (type) {
        var video = document.createElement("video");
        if(video.canPlayType){
            if("" !== video.canPlayType(type)){
                return true;
            }
        }
        return false;
    }

    //检测音频类型是否能被播放
    function checkAudioType (type) {
        var audio = document.createElement("audio");
        if(audio.canPlayType){
            if("" !== audio.canPlayType(type)){
                return true;
            }
        }
        return false;
    }

    //设置元素宽度
    function width (videoobj, width){
        videoobj.width = width;
    }

    //设置元素高度
    function height (videoobj, height) {
        videoobj.height = height;
    }

    //报错
    function loadingError (videoobj) {
        var videsArr = [];
        if(typeof videoobj !== "undefined" && videoobj){
            videsArr.push(videoobj);
        }else {
            var videos = document.getElementsByTagName("video");
            videsArr = videos;
        }
        for(var i = 0,len = videsArr.length; i < len; i++){
            videsArr[i].addEventListener("error", function () {
                var error = this.error;
                switch (error.code){
                    case 1:
                        alert("视频下载过程被终止！");
                        break;
                    case 2:
                        alert("网络发生故障，视频下载过程被终止！");
                        break;
                    case 3:
                        alert("解码失败。");
                        break;
                    case 4:
                        alert("不支持播放的视频格式。");
                        break;
                    default :
                        alert("发生未知错误。");
                        break;
                }
            })
        }
    }





</script>

</body>
</html>