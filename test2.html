<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <style>

        #gg{
            width: 500px;
            height: 400px;
        }

    </style>
</head>
<body>


<input type="file" id="filebtn"/>
<!--<input type="button" value="上传" id="btn"/>-->
<img src="" alt="" id="tempimg"/>
<div id="gg"></div>


<script src="js/preimgs.js"></script>
<script>




    var filebtn = document.getElementById("filebtn");

    filebtn.onchange = function () {
//        var reader = new FileReader();
//        reader.readAsDataURL(filebtn.files[0]);
//        reader.onload = function (e) {
//            document.getElementById('tempimg').src = reader.result;
//        }
        PreviewImage(filebtn,"tempimg", "gg");
    }







    //PreviewImage(filebtn,"tempimg", "gg");
//    document.getElementById("btn").onclick = function () {
//        getFiles(filebtn, function(file){
//            alert(this.name);
//        })
//    }

    //获取文件名
    function getFiles (obj, fn) {
        var files = obj.files;
        if(files){
            for( var i = 0,len = files.length; i < len; i++){
                var file = files[i];
                if(typeof fn === "function"){
                    fn.call(file,{
                        name: file.name,
                        type: file.type,
                        size: file.size
                    })
                }
            }
        }else {
            throw new Error("您的浏览器不支持file api");
        }
    }

    function isIMG (obj) {
        getFiles(obj, function (file) {
            if(!/image\/\w+/.test(file.type)){
                alert(file.name + "不是图片文件！");
                throw new Error("error");
            }
        })
    }





</script>

</body>
</html>